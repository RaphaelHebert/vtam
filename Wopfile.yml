rule ReadCSV:
    tool: wopmetabarcoding.wrapper.FileInformation
    input:
        file:
            csv: data/1_sample_info.csv
    output:
        table:
            File: wopmetabarcoding.model.File
            SampleInformation: wopmetabarcoding.model.SampleInformation
            Marker: wopmetabarcoding.model.Marker
            PrimerPair: wopmetabarcoding.model.PrimerPair
            Biosample: wopmetabarcoding.model.Biosample
            TagPair: wopmetabarcoding.model.TagPair
            Replicate: wopmetabarcoding.model.Replicate

rule VsearchSort:
    tool: wopmetabarcoding.wrapper.VsearchSortReads
    input:
        table:
            File: wopmetabarcoding.model.File
            SampleInformation: wopmetabarcoding.model.SampleInformation
            Marker: wopmetabarcoding.model.Marker
    output:
        table:
            ReadCount: wopmetabarcoding.model.ReadCount
            Variant: wopmetabarcoding.model.Variant
    params:
        min_id: 0.8
        minseqlength: 32
        overhang: 0

rule Filter:
    tool: wopmetabarcoding.wrapper.Filter
    input:
        table:
          Marker: wopmetabarcoding.model.Marker
          Variant: wopmetabarcoding.model.Variant
          Replicate: wopmetabarcoding.model.Replicate




