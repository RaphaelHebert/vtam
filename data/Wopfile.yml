rule ReadCSV:
    tool: wopmetabarcoding.wrapper.FileInformation
    input:
        file:
            csv: 1_sample_info.csv
    output:
        table:
            Marker: wopmetabarcoding.model.Marker
            PrimerPair: wopmetabarcoding.model.PrimerPair
            Tag: wopmetabarcoding.model.Tag
            File: wopmetabarcoding.model.File
            Sample: wopmetabarcoding.model.Sample
            FileInformation: wopmetabarcoding.model.FileInformation

rule VsearchSort:
    tool: wopmetabarcoding.wrapper.VsearchSortReads
    input:
        table:
            FileInformation: wopmetabarcoding.model.FileInformation
            File: wopmetabarcoding.model.File
    output:
        file:
            fastadb: output/fasta_db.fasta
            reversefastadb: output/reverse_fasta_db.fasta
            csvsearch: output/vsearch_result.csv
            fowardtrimmed: output/forward_trimmed.fasta
            outputforward: output/output forward_reverse_trimmed.fasta

        table:
            ReadCount: wopmetabarcoding.model.ReadCount
            OutputCsv: wopmetabarcoding.model.OutputCsv
            ReverseTrimmed: wopmetabarcoding.model.ReverseTrimmed
            ObiFasta: wopmetabarcoding.model.ObiFasta
            Variant: wopmetabarcoding.model.Variant
    params:
        min_id: 0.8
        minseqlength: 32


