{% from 'macros.yml' import rule_optimize_lfn_readcount_and_lfn_variant_replicate %}{% extends "block_wopfile_asv_optimize.yml" %}
{% block wopfile_optimize %}rule OptimizeLFNbiosampleReplicate:
    tool: vtam.wrapper.OptimizeLFNbiosampleReplicate
    input:
        table:
            Run: vtam.models.Run
            Marker: vtam.models.Marker
            Biosample: vtam.models.Biosample
            Variant: vtam.models.Variant
            VariantReadCount: vtam.models.VariantReadCount
        file:
            readinfo: {{readinfo}}
            variant_known: {{variant_known}}
    output:
        file:
            optimize_lfn_biosample_replicate: {{optimize_lfn_biosample_replicate}}


rule OptimizePCRerror:
    tool: vtam.wrapper.OptimizePCRerror
    input:
        table:
            Run: vtam.models.Run
            Marker: vtam.models.Marker
            Biosample: vtam.models.Biosample
            Variant: vtam.models.Variant
            VariantReadCount: vtam.models.VariantReadCount
        file:
            readinfo: {{readinfo}}
            variant_known: {{variant_known}}
    output:
        file:
            optimize_pcr_error: {{optimize_pcr_error}}


{{ rule_optimize_lfn_readcount_and_lfn_variant_replicate(lfn_variant_threshold, lfn_variant_replicate_threshold, readinfo, variant_known, lfn_biosample_replicate_threshold, lfn_read_count_threshold, min_replicate_number, optimize_lfn_read_count_and_lfn_variant, optimize_lfn_variant_specific, optimize_lfn_read_count_and_lfn_variant_replicate, optimize_lfn_variant_replicate_specific) }}{% endblock %}